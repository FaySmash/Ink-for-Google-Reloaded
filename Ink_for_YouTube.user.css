/* ==UserStyle==
@name           Ink for YouTube
@namespace      github.com/FaySmash
@version        0.1.7
@description    This gives YouTube more color back!
@author         FaySmash (https://github.com/FaySmash)
@homepageURL	https://github.com/FaySmash/Ink-for-Google-Reloaded
@supportURL 	https://github.com/FaySmash/Ink-for-Google-Reloaded/issues
@license		GPL-3.0-or-later
@preprocessor	stylus
@var			color		primary-color		'Primary Color'			#D91D1B
@var			color		secondary-color		'Secondary Color'		#FFFFFF
@var			color		secondary-color2	'Secondary Color 2'		#D91D1B
@var			select		adaptive-color		'Adaptive Color'		["Fixed", "Adaptive"]
@var			checkbox	menu-button			'Menu Button'			1
@var			checkbox	message-button		'Message Button'			1
==/UserStyle== */
@-moz-document domain("www.youtube.com") {
    /* ---------------------------------------------------------------------- TOP BAR ---------------------------------------------------------------------- */
    /* makes the scroll bar at the left persistent, even when not hovered over the app drawer */
    body {
        overflow: visible !important;
    }

    /* sets the color, adding shadow and adjusting height of the bar at the top */
    #container.ytd-masthead {
        background-color: primary-color !important;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12), 0 3px 1px -2px rgba(0, 0, 0, .2);
        height: 64px;
    }

    /* Top Progress Bar */
    #progress.yt-page-navigation-progress {
        background-color: darken(primary-color, 25%);
    }

    /* sets the color of the country ID to secondary color */
    #country-code.ytd-topbar-logo-renderer {
        color: secondary-color;
    }

    /* sets the color of the YouTube Icon to secondary color */
    .style-scope.ytd-topbar-logo-renderer:nth-of-type(1) {
        fill: secondary-color;
    }

    /* sets the color of the Arrow inside the YouTube Icon to primary color */
    .style-scope.ytd-topbar-logo-renderer:nth-child(2) {
        fill: primary-color;
    }

    /* sets the color of the YouTube Text to secondary color */
    ytd-topbar-logo-renderer.style-scope:nth-child(4) > a:nth-child(1) > div:nth-child(1) > svg:nth-child(1) > g:nth-child(1) > g:nth-child(2) > g:nth-child(1) > path {
        fill: secondary-color !important
    }

    /* ---------------------------------------------------------------------- APP DRAWER ---------------------------------------------------------------------- */
    /* sets the color of the YouTube text in the App Drawer to secondary color */
    #logo-icon-container.ytd-topbar-logo-renderer #youtube-paths.ytd-topbar-logo-renderer path.ytd-topbar-logo-renderer {
        fill: var(--yt-swatch-logo-override, secondary-color);
    }

    /* sets the color, shadow and height of the top of the app drawer */
    #header.ytd-app {
        background-color: primary-color;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12), 0 3px 1px -2px rgba(0, 0, 0, .2);
        height: 64px;
    }

    /* removes the line under the top of the app drawer */
    app-drawer.ytd-app:not([persistent]) #header.ytd-app {
        border: none;
    }

    /* stopps the app drawer from adding 17px the margin-right of <ytd-app> when hovered (to prevent glitch because of appearing scroll bar, must be used in conjunction with body {overflow: visible;} */
    .ytd-app {
        margin-right: 0;
        --ytd-app-scroll-offset: 0;
    }

    /* because of adding hight to the top of the app drawer (48px + 2px shadow + 6px height), adjusting the size of the app drawer top spacer, content and page-manager */
    #guide-spacer.ytd-app {
        margin-bottom: 8px;
    }

    #content {
        padding-top: 8px;
    }

    #page-manager.ytd-app {
        --ytd-toolbar-offset: var(--ytd-masthead-height, 64px);
    }

    /* ---------------------------------------------------------------------- TOP BAR BUTTONS ---------------------------------------------------------------------- */
    /* sets the color of the burger menu icon in the top left corner to secondary color */
    #guide-icon.ytd-app {
        fill: secondary-color;
    }

    /* sets the color of the icons in the top right corner to secondary color */
    #buttons.ytd-masthead .ytd-masthead[is-icon-button] yt-icon {
        color: secondary-color;
    }

    /* sets the color of the icon of YouTube+ aka Particle aka Iridium to secondary color */
    #iridium_settings_button path,
    #iridium_settings_button polygon {
        fill: secondary-color !important;
    }

    /* set the color of the Burger Menu icon in the top right corner to secondary-color */
    #guide-icon.ytd-masthead {
        fill: secondary-color;
    }

    /* toggle if the menu button should be visible  */
    ytd-topbar-menu-button-renderer.style-scope:nth-child(2) {
        if menu-button==0 {
            display: none !important;
        }
    }

    /* toggle if the message button should be visible  */
    ytd-notification-topbar-button-renderer.style-scope:nth-child(3) {
        if message-button==0 {
            display: none !important;
        }
    }

    /* sets the color of the notification count background to primary color with 65% less lightness */
    #notification-count.ytd-notification-topbar-button-renderer {
        background-color: lightness(primary-color, 35%);
        color: secondary-color;
    }

    /* ---------------------------------------------------------------------- OTHER BUTTONS ---------------------------------------------------------------------- */
    /* APP DRAWER active Button */
    ytd-guide-entry-renderer[active] .guide-icon.ytd-guide-entry-renderer {
        color: secondary-color2 !important;
    }

    /* Thumbnail Progressbar */
    #progress.ytd-thumbnail-overlay-resume-playback-renderer {
        background: secondary-color2;
    }

    /* Video Progressbar */
    .ytp-progress-bar .ytp-progress-list .ytp-play-progress.ytp-swatch-background-color {
        background: secondary-color2;
    }

    /* Video Progressbar Cursor Button */
    .ytp-progress-bar .ytp-scrubber-button {
        background: secondary-color2;
    }

    /* Buttons for Live Streams */
    .badge.badge-style-type-live-now {
        color: secondary-color2;
        border: 1px solid secondary-color2 !important;
    }

    .badge-style-type-live-now.ytd-badge-supported-renderer {
        border: 1px solid secondary-color2 !important;
    }

    /* Live Badge */
    .ytp-live-badge.ytp-button::before {
        background: secondary-color2 !important;
    }

    /* Resolution Settings Badge */
    .ytp-settings-button.ytp-hd-quality-badge::after,
    .ytp-settings-button.ytp-4k-quality-badge::after,
    .ytp-settings-button.ytp-5k-quality-badge::after,
    .ytp-settings-button.ytp-8k-quality-badge::after {
        background-color: secondary-color2;
    }

    /* Subtitle Button unterline */
    .ytp-chrome-controls .ytp-button[aria-pressed]::after {
        background: secondary-color2;
    }

    /* Alert Render */
    .INFO.ytd-alert-renderer {
        background-color: secondary-color2 !important;
    }

    /* Subscribe Button */
    ytd-subscribe-button-renderer:not([button-style]) paper-button:not([subscribed]) {
        background-color: secondary-color2;
    }

    /* Watch Card */
    #watch-card-header.ytd-generic-watch-card {
        background: secondary-color2 !important;
    }

    #img-endpoint.ytd-watch-card-collage-renderer #overlay-button.ytd-watch-card-collage-renderer {
        background: secondary-color2 !important;
    }

    paper-tab.iron-selected.ytd-generic-watch-card {
        color: secondary-color2 !important;
    }

    #selectionBar {
        background: secondary-color2 !important
    }

    /* Brand Color */
    *:not([style-scope]):not(.style-scope) {
        --yt-brand-paper-button-color: secondary-color2 !important;
        --yt-brand-color: 1px solid secondary-color2 !important;
        --paper-tabs-selection-bar-color: secondary-color2 !important;
    }

    /* ---------------------------------------------------------------------- SEARCHBOX ---------------------------------------------------------------------- */
    /* adds the magnifying glass icon in front of the input field */
    #search-input::before {
        content: "";
        height: 24px;
        width: 24px;
        position: absolute;
        z-index: 2;
        top: 12px;
        left: 16px;
        background-image: 'url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22%23%s%22%3E%3Cpath%20d%3D%22M15.5%2014h-.79l-.28-.27A6.471%206.471%200%200%200%2016%209.5%206.5%206.5%200%201%200%209.5%2016c1.61%200%203.09-.59%204.23-1.57l.27.28v.79l5%204.99L20.49%2019l-4.99-5zm-6%200C7.01%2014%205%2011.99%205%209.5S7.01%205%209.5%205%2014%207.01%2014%209.5%2011.99%2014%209.5%2014z%22/%3E%3C/svg%3E")' % unquote(slice(unquote(""+rgba(secondary-color, 1.0)), 1));
        /* the URL without encoding: url("data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="#%s"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>" 

more information about % unquote(slice(unquote(""+secondary-color),1)):
https://stackoverflow.com/questions/40075293/using-stylus-css-preprocessor-embedding-svg-in-a-background-image-property-with
http://stylus-lang.com/docs/bifs.html#unquotestr--ident
http://stylus-lang.com/docs/bifs.html#sliceval-start-end
		*/
    }

    /* sets the color of the text in the input field to secondary color */
    ytd-searchbox[mode="legacy"] #container.ytd-searchbox input.ytd-searchbox,
    ytd-searchbox[mode="legacy-centered"] #container.ytd-searchbox input.ytd-searchbox {
        color: secondary-color !important;
    }

    /* determines the design of the searchbox */
    ytd-searchbox[mode="legacy"][has-focus] #container.ytd-searchbox,
    ytd-searchbox[mode="legacy-centered"][has-focus] #container.ytd-searchbox,
    ytd-searchbox[mode="legacy"] #container.ytd-searchbox,
    ytd-searchbox[mode="legacy-centered"] #container.ytd-searchbox,
    {
        -webkit-text-fill-color: secondary-color;
        height: 48px;
        max-width: 650px;
        border-radius: 4px;
        border: none;
        background-color: hsla(0, 0%, 100%, .15);
        box-shadow: none;
        padding: 0;
        padding-left: 72px;
        font: 400 16px/48px Roboto, Arial, sans-serif;
        outline: none;
    }

    /* hides the "search" button */
    button#search-icon-legacy.style-scope.ytd-searchbox {
        display: none;
    }
}


/* determines if the always colored or adaptive colored top bar style is applied */
if adaptive-color==Adaptive {
    @-moz-document regexp("https?:\/\/(www\.)?youtube\.com\/watch.*") {
        /* sets the color of the bar at the top */
        #container.ytd-masthead {
            background-color: rgba(35, 35, 35, 0.999) !important;
        }

        /* sets the of the top of the app drawer */
        #header.ytd-app {
            background-color: rgba(35, 35, 35, 0.999);
        }

        /* sets the color of the Arrow inside the YouTube Icon to rgb(35,35,35) */
        .style-scope.ytd-topbar-logo-renderer:nth-child(2) {
            fill: rgba(35, 35, 35, 0.999);
        }
    }
}